<!doctype html>
<html lang="en">

<head>
	<!-- Google Analytics Tracking Code -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-90875446-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- Google Analytics Tracking Code -->
	<title>Marco Notaro OSM</title>
	<meta charset="UTF-8">
	<meta name="author" content="Marco Notaro">
	<meta name="description" content="Marco Notaro WebSite">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- to make the site responsive -->
	<meta name="keywords" content="openstreetmap, visited places, world">
	<link rel="shortcut icon" href="img/wolf.gif">
	<link rel="stylesheet" type="text/css" href="css/css.css"> 
	<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css">
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">
    <link rel="stylesheet" type="text/css" href="css/control.full.screen.css">
    <script type="text/javascript" src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
    <script type="text/javascript" src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster-src.js"></script>
  	<script type="text/javascript" src="js/control.full.screen.js"></script>
</head>

<body>
	<div id="container">    
		<div id="header">
			<a href="index.html" title="Marco Notaro"><img id="logo" src="img/marcologo.png" alt="Marco Notaro" height="50"></a>     
		</div>

		<div id="navigationbar"> 	
			<div id="navigation">
				<ul class="menubar">	
					<li><b><a class="menubar" href="index.html">Home</a></b></li>
					<li><b><a class="menubar" href="research.html">Research</a></b></li>
					<li><b><a class="menubar" href="teaching.html">Teaching</a></b></li>
					<li><b><a class="menubar" href="publications.html">Publications</a></b></li>
					<li><b><a class="menubar" href="software.html">Software</a></b></li>					
					<li><b><a class="menubar" href="contact.html">Contact</a></b></li>					
					<li><b><a class="menubar" href="visitedplaces.html">Visited Places</a></b></li>
				</ul>
			</div> 		
		</div> 	

		<div class="bodycontainer">
			<p>
				The interactive map below (made by using <a href="https://www.openstreetmap.org" target="_blank">OpeenStreetMap</a> and 
				<a href="https://leafletjs.com/" target="_blank"> Leaflet library</a>) shows the places that I visited around the world.
				To cluster the markers I used the <a href="https://github.com/Leaflet/Leaflet.markercluster" target="_blank"> markercluster</a> plugin. 
				<!-- Clicking on a bubble the area will blow up and clicking on a marker the info window will display. -->
				Click on the bubble to blow the area up. Click on the marker to display the info window.
			</p>
			<div id="map"></div>
			<!-- Json file where city are stored -->
			<script type='text/javascript' src="js/visitedplaces.js"></script> 
			<!-- Leaflet JavaScript -->
			<script>
				// initialize map
				// full screen: https://github.com/brunob/leaflet.fullscreen
				var map = L.map('map',{
				zoomControl: true,
				zoomControlOptions: {position: 'topright'},
				fullscreenControl: true,
				fullscreenControlOptions: {position: 'topright'}
				}).setView([14, 14], 2);

				// set map tiles source
				mapLink = '<a href="http://openstreetmap.org">OpenStreetMap</a>';
				boxLink = '<a href="https://www.mapbox.com/">Mapbox</a>';			
				L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',{
					attribution: '&copy; ' + mapLink + ' Contributors,' + ' Imagery ' + boxLink,
					maxZoom: 20,
					id: 'mapbox.streets',
					accessToken: 'pk.eyJ1IjoibW41MTUiLCJhIjoiY2pteDVwNGZtMnF2eTNrcG4xcWp6M2FoeSJ9.IHSYNXCOHQJTSy0eGVEtZw'
				}).addTo(map); 

				// custom icon
				// options doc: https://leafletjs.com/reference-1.3.4.html#icon
				// markers link: https://github.com/pointhi/leaflet-color-markers
				var CustomIcon = L.icon({
					iconUrl: 'img/marker-icon-violet.png', 
					iconRetinaUrl: "img/marker-icon-2x-violet.png", 
					iconSize: [15,25], // resize original icon of 60%
					iconAnchor: [7,24],
					popupAnchor: [1,-15]
				});
				
				// add a marker for each city 
				// for (var i = 0; i < places.length; i++) {
				// 	marker = new L.marker([places[i].lat, places[i].lon], {icon: CustomIcon})
				// 	.bindPopup(places[i][0])
				// 	.addTo(map);
				// }

				// clusterize marker on the map
				var markerClusters = L.markerClusterGroup();
				for(var i=0; i<places.length; i++){			
					var popup = places[i].city;
					var marker = L.marker([places[i].lat, places[i].lon], {icon: CustomIcon}).bindPopup(popup);
					markerClusters.addLayer(marker);
				}
				map.addLayer(markerClusters);
			</script>
			
		</div> <!-- end bodycontainer --> 
		<div id="footer"></div>
	</div>
</body>
</html>

